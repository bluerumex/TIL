### JavaScript 스코프체인

> 일반 언어의 스코프(유효범위)는 {, }로 묶여 범위 안에서 선언된 변수는 블록이 끝나는 순간 사라지므로
> 밖에서 접근할 수 없다, 함수의 {,}뿐만 아니라 if, for문의 {,} 블록도 마찬가지이다
> 자바스크립트에서는 함수 내의 {,} if, for {,}와 같은 구문은 유효 범위가 없다
> 오직 `함수`만이 유효범위의 한 단위가 된다
> 이 유효 범위를 나타내는 스코프가 `[[scope]]` 프로퍼티로 각 함수 객체 내에서 연결 리스트 형식으로 관리되는데
> 이를 `스코프체인`이라 한다

##### 
```javascript
// 스코프 체인
// 각 실행 컨텍스트의 변수 객체가 구성 요소인 리스트와 같다
[3][..........]
[2][변수 객체2]
[1][변수 객체1]
[0][변수 객체0]

// 각각의 함수는 [[scope]] 프로퍼티로 자신이 생성된 실행 컨텍스트의 스코프 체인을 참조한다.
// 함수가 실행되는 순간 실행 컨텍스트가 만들어지고,
// 이 실행 컨텍스트는 실행된 함수의 [[scope]] 프로퍼티를 기반으로 새로운 스코프 체인을 만든다
// 아래 예제를 참고하자

// ---------- 1.전역 실행 컨텍스트의 스코프 체인 ---------------------------------------------------

var var1 = 1;
var var2 = 2;
console.log(var1);	// (출력값) 1
console.log(var2);	// (출력값) 2

// 위 예제는 전역 코드이다. 함수가 선언되지 않아 함수 호출이 없고, 실행 가능한 코드들만 나열되어 있다.
// 코드를 실행하면, 먼저 전역 실행 컨텍스트가 생성되고, 변수 객체가 만들어진다
// 이 변수 객체의 스코프 체인은 어떻게 될까? 현재 전역 실행 컨텍스트는 단 하나만 실행되고 있어
// 참조할 상위 컨텍스트가 없다. 자신이 최상위에 위치하는 변수 객체인 것이다.
// 따라서 이 변수 객체의 스코프 체인은 자기 자신만을 가진다.

// ---------- 2.함수를 호출한 경우 생성되는 실행 컨텍스트의 스코프 체인 ----------------------------

var var1 = 1;
var var2 = 2;

function func() {
	var var1 = 10;
    var var2 = 20;
    console.log(var1); // 출력값 10
    console.log(var2); // 출력값 20
}

func();
console.log(var1); // 출력값 1
console.log(var2); // 출력값 2

-------------------
    스코프 체인
[1] func 변수 객체
[0] 전역 객체
-------------------


// 각 함수 객체는[[scope]] 프로퍼티로 현재 컨텍스트의 스코프 체인을 참조한다
// 한 함수가 실행되면 새로운 실행 컨텍스트가 만들어지는데, 이 새로운 실행 컨텍스트는 자신이 사용할
// 스코프 체인을 다음과 같이 만든다.
// 현재 실행되는 함수 객체의 [[scope]] 프로퍼티를 복사하고, 새롭게 생성된 변수 객체를 해당 체인
// 제일 앞에 추가한다

// 스코프 체인 = 현재 실행 컨텍스트의 변수 객체 + 상위 컨텍스트의 스코프 체인

var value = 'value1';

function printfunc() {
	var value = 'value2';

    function printValue() {
    	return value;
    }
    console.log(printValue());
}

printFunc();
```


