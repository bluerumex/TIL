### SQL 기능적 관점으로 구분하는 결합의 종류

>SQL에 '결합'이라는 이름이 붙은 연산자
>크로스 결합, 내부 결합, 외부 결합, 자기 결합, 등가 결합/비등가 결합, 자연 결합

##### 
```SQL

// 예제 테이블 employees
  emp_id  | emp_name | dept_id
----------+----------+---------
 001      | 하린     | 10
 002      | 한미루   | 11
 003      | 사라     | 11
 004      | 중민     | 12
 005      | 웅식     | 12
 006      | 주아     | 12

// 에제 테이블 departmetn
 dept_id | dept_name
---------+----------
 10      | 총무
 11      | 인사
 12      | 개발
 13      | 영업

// ------------------------------- 1. 크로스 결합 (모든 결합의 모체) ------------------------------- //

기능적인 관점으로 분류한 것이 크로스결합, 내부결합, 외부결합인데,
이 세가지는 생성되는 결과의 형태에 따라 이름 지어졌으며, 이 세가지는 서로 베타적인 분류이므로
'내부 결합이면서 외부 결합이다'라는 조합은 없다.

SELECT *
　FROM Employees
         CROSS JOIN
           Departments;

결과는 6 * 4 = 24개 레코드가 만들어 진다.
크로스 조합이 실무에서 사용되지 않는 이유
1. 이런 결과가 필요한 경우가 없다
2. 비용이 매우 많이 드는 연산이다.

실수로 사용하는 크로스 조인
SELECT *
  FROM Employees, Departments;

// -------------------------- 2. 내부 결합 (왜 '내부'라는 말을 사용할까?) -------------------------- //

// 출력 포맷
 emp_id  | emp_name | dept_id | dept_name
---------+----------+---------+-----------
001      | 하린     | 10      | 총무
002      | 한미루   | 11      | 인사
003      | 사라     | 11      | 인사
004      | 중민     | 12      | 개발
005      | 웅식     | 12      | 개발
006      | 주아     | 12      | 개발

SELECT E.emp_id, E.emp_name, E.dept_id, D.dept_name
　FROM Employees E INNER JOIN Departments D
    ON E.dept_id = D.dept_id;

이 결과는 앞에서 본 크로스 결과를 비교해보면, 내부 결합의 결과는 모두 크로스 결합 결과의
일부(부분집합)이라는 것을 알 수가 있다.

- 내부 결합과 같은 기능을 하는 상관 서브쿼리
SELECT E.emp_id, E.emp_name, E.dept_id,
       (SELECT D.dept_name
          FROM Departments D
         WHERE E.dept_id = D.dept_id) AS dept_name
  FROM Employees E;

상관 서브쿼리 내부에서 결합 조건을 기술하고 있는데, dept_id는 부서 테이블의 기본 키이므로
이를 조건으로 지정하면 레코드가 한 개로 한정될 것이 보장되기 때문에 사용이 가능하다.

그렇다면 내부 결합과 상관 서브쿼리 중 무엇이 사용하기 좋을까?
기본적으로는 결합을 사용하는 것이 좋다.
상관 서브쿼리를 스칼라 서브쿼리로 사용하면 결과 레코드 수만큼 상관 서브쿼리를 실행해 비용이 높아짐

// -------------------------- 3. 외부 결합 (왜 '외부'라는 말을 사용할까?) -------------------------- //

내부 결합과 외부 결합은 배타적인 연산이다
'내부'가 '데카트르 곱의 부분집합'이라는 함축한 것이었으므로,
'외부'는 '데카르트 곱의 부분집합이 아니다'라는 의미이다
다만, 데이터 상태에 따라 경우에 따라서 데카르트 곱의 부분집합이 되기도 한다.

- 외부 결합의 작동 세가지
 1. 외쪽 외부 결합
 2. 오른쪽 외부 결합
 3. 완전 외부 결합


왼쪽 외부 결합
  emp_id  | emp_name | dept_id | dept_name
----------+----------+---------+-----------
 001      | 하린     | 10      | 총무
 002      | 한미루   | 11      | 인사
 003      | 사라     | 11      | 인사
 004      | 중민     | 12      | 개발
 005      | 웅식     | 12      | 개발
 006      | 주아     | 12      | 개발
          |          |         | 영업

맨아래쪽 레코드는 크로스 결합에서는 생성되지 않은 레코드

-- 왼쪽 외부 결합(왼쪽 테이블이 마스터)
SELECT E.emp_id, E.emp_name, E.dept_id, D.dept_name
　FROM Departments D LEFT OUTER JOIN Employees E
    ON D.dept_id = E.dept_id;

--  오른쪽 외부 결합(오른쪽 테이블이 마스터)
SELECT E.emp_id, E.emp_name, D.dept_id, D.dept_name
　FROM Employees E RIGHT OUTER JOIN Departments D
    ON E.dept_id = D.dept_id;

마스터 테이블의 결과를 보존하고자 NULL('공백')을 생성하기 때문에
반면 크로스, 내부 결합은 NULL을 생성하지 않는다


// -------------------------- 4. 외부 결합과 내부 결합의 차이 -------------------------- //

7번째 행 - 내부결합은 물론 크로스결합 결과에도 없던 레코드
이 레코드가 바로 '외부 결합'에서의 '외부'의 의미가 된다.
앞의 6개 레코드는 내부 결합과 결과 결과가 같고 마지막에 보이는 하나의 행만 결과가 다르다.


// -------------------------- 5. 자기 결합('자기'란 누구일까?) -------------------------- //

자기 결합(self join)은 문자 그대로 자기 자신과 결합하는 연산
자기 결합은 생성되는 결과를 기준으로 분류하는 것이 아니라 연산의 대상으로 무엇을 사용하는지에
따른 분류이다.

따라서 자기 결합은
'자기 결합 + 크로스 결합', '자기 결합 + 외부 결합', '자기 결합 + 외부 결합' 과 같은 조합이 가능

// 예제 테이블
 digit
-------
     0
     1
     2
     3
     4
     5
     6
     7
     8
     9

SELECT D1.digit + (D2.digit * 10) AS seq
　FROM Digits D1 CROSS JOIN Digits D2;

 seq
-----
   0
   1
   2
   3
   4
   5
   .
   .
   98
   99

10 * 10 = 100 개의 레코드를 생성 (0 ~ 99)

- 자기 결합의 사고방식
자기 결합을 수행하는 경우는 일반적으로 같은 테이블에 별칭(D1, D2)를 붙여 마치 다른 테이블인
것 처럼 다룬다.
```


